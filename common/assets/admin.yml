---
backend:
{{ if eq hugo.Environment "development" }}
  name: proxy
  proxy_url: http://localhost:8081/api/v1
{{ else }}
  name: git-gateway
{{ end }}
  branch: main
site_url: "{{ .Site.BaseURL }}"
media_folder: {{ .Site.Params.dir }}/assets/assets
public_folder: /assets/
logo_url: {{ (resources.Get "favicon.svg" | resources.Fingerprint "md5").RelPermalink }}
collections:
  - name: pages
    label: Pages
    label_singular: Page
    folder: {{ .Site.Params.dir }}/content
    create: true
    format: frontmatter
    preview_path: '{{ print "{{ slug }}" }}/'
    editor: { preview: false }
    fields:
      - label: Title
        name: title
        widget: string
      - label: Content
        name: body
        widget: markdown
      - label: Redirects
        label_singular: Redirect
        name: redirects
        widget: list
        field:
          name: from
          label: From
          hint: "Should start with a ‘/’"
        summary: '{{ print "{{from}}" }}'
  - label: Site settings
    name: site_settings
    delete: false
    editor: { preview: false }
    files:
      - label: Design
        name: design
        preview_path: "/"
        file: main/data/design.yaml
        fields:
          - label: Colours
            name: colors
            widget: object
            fields:
              - label: Background
                name: background
                widget: string
                default: "#ffffff"
              - label: Body text
                name: body
                widget: string
                default: "#000000"
              - label: Accent
                name: accent
                widget: string
                default: "#cc3232"
      - label: Redirects
        name: redirects
        file: main/data/redirects.yaml
        fields:
          - label: Redirects
            label_singular: Redirect
            name: redirects
            widget: list
            summary: '{{ print "{{from}} → {{to}}" }}'
            fields:
              - label: From
                name: from
                widget: string
                default: "/"
                hint: "Should start with a ‘/’"
              - label: To
                name: to
                widget: string
                hint: "Should either start with a ‘/’ for this site, or ‘https://’ for another site"
